<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-en="CyberSynth Strudel - Interactive Tutorial" data-fa="آموزش تعاملی CyberSynth Strudel">CyberSynth Strudel - Interactive Tutorial</title>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&family=Orbitron:wght@400;700;900&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/css/line-awesome.min.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        :root {
            --primary-cyan: #00ffff;
            --secondary-magenta: #ff00ff;
            --accent-yellow: #f0ff4d;
            --background-dark: #0a0a1a;
            --panel-bg: rgba(10, 10, 30, 0.9);
            --glow-cyan: 0 0 20px rgba(0, 255, 255, 0.5);
            --glow-magenta: 0 0 20px rgba(255, 0, 255, 0.5);
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0c0;
            --grid-color: #1a2a4a;
            --code-label: "Strudel Code";
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Vazirmatn', 'Orbitron', sans-serif;
            background: var(--background-dark);
            color: var(--text-primary);
            line-height: 1.7;
            font-size: 17px;
        }

        body.rtl {
            direction: rtl;
            text-align: right;
        }

        .cyber-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 255, 255, 0.07) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.07) 1px, transparent 1px);
            background-size: 40px 40px;
            pointer-events: none;
            z-index: -1;
            animation: grid-move 10s linear infinite;
        }

        @keyframes grid-move {
            from { background-position: 0 0; }
            to { background-position: 40px 40px; }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            border: 1px solid var(--primary-cyan);
            border-radius: 15px;
            background: var(--panel-bg);
            box-shadow: var(--glow-cyan);
            position: relative;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .lang-toggle-btn {
            background: none;
            border: 1px solid var(--primary-cyan);
            color: var(--primary-cyan);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            transition: all 0.3s ease;
        }
        .lang-toggle-btn:hover {
            background: var(--primary-cyan);
            color: var(--background-dark);
            box-shadow: var(--glow-cyan);
        }
        
        header h1 {
            font-family: 'Orbitron', monospace;
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 900;
            text-shadow: 0 0 15px var(--primary-cyan);
            color: white;
            margin-bottom: 0.5rem;
            width: 100%;
            text-align: center;
        }

        header p {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .tutorial-section {
            background: var(--panel-bg);
            border: 1px solid var(--primary-cyan);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        .tutorial-section:hover {
            box-shadow: var(--glow-magenta);
            border-color: var(--secondary-magenta);
        }

        h2 {
            font-family: 'Orbitron', monospace;
            color: var(--accent-yellow);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-cyan);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h3 {
            color: var(--primary-cyan);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        p, li {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }
        
        ul {
            list-style: none;
            padding-left: 20px;
        }

        li {
            position: relative;
        }

        li::before {
            content: '»';
            position: absolute;
            left: -20px;
            color: var(--primary-cyan);
            font-weight: bold;
        }

        strong {
            color: var(--accent-yellow);
            font-weight: 600;
        }

        .example-box {
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            border-left: 4px solid var(--accent-yellow);
        }

        .example-box p {
            margin-bottom: 1rem;
        }

        .strudel-iframe {
            width: 100%;
            height: 200px;
            border: 1px solid var(--primary-cyan);
            border-radius: 8px;
            background-color: #000;
        }
        
        .code-explanation {
            background: rgba(10, 10, 30, 0.7);
            padding: 10px 15px;
            border-radius: 8px;
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
            color: var(--text-secondary);
            border: 1px solid #1a2a4a;
        }
        
        .tip {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid var(--primary-cyan);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .tip strong {
            color: var(--primary-cyan);
        }

    </style>
</head>
<body>
    <div class="cyber-grid"></div>
    <div class="container">
        <header>
            <div class="header-top">
                <span></span>
                <h1 data-en="CyberSynth Tutorial" data-fa="آموزش CyberSynth">CyberSynth Tutorial</h1>
                <button id="lang-toggle" class="lang-toggle-btn">Persian</button>
            </div>
            <p data-en="Your guide to live coding music with Strudel & AI" data-fa="راهنمای شما برای موسیقی کدنویسی زنده با Strudel و هوش مصنوعی">Your guide to live coding music with Strudel & AI</p>
        </header>

        <main>
            <section class="tutorial-section" id="welcome">
                <h2 data-en="<i class='las la-rocket'></i> Welcome, Future Sound Architect!" data-fa="<i class='las la-rocket'></i> خوش آمدید، معمار آینده صدا!"><i class='las la-rocket'></i> Welcome, Future Sound Architect!</h2>
                <p data-en="Hello! Welcome to the CyberSynth Strudel tutorial. Think of me as your friendly guide on an exciting journey into creating music with code. It might seem technical, but it's really just a new, powerful way to play an instrument." data-fa="سلام! به آموزش CyberSynth Strudel خوش آمدید. ">
                    Hello! Welcome to the CyberSynth Strudel tutorial. Think of me as your friendly guide on an exciting journey into creating music with code. It might seem technical, but it's really just a new, powerful way to play an instrument.
                </p>
                <p data-en="Whether you're a musician new to code, a coder new to music, or just curious, you're in the right place. We'll start simple and explore how to bring your musical ideas to life, one line of code at a time." data-fa="چه یک موسیقیدان باشید که با کدنویسی آشنا نیست، چه یک کدنویس که با موسیقی آشنا نیست، یا صرفاً کنجکاو، جای درستی آمده‌اید. ما از مفاهیم ساده شروع می‌کنیم و بررسی می‌کنیم که چگونه ایده‌های موسیقایی خود را خلق کنید، خط به خط.">
                    Whether you're a musician new to code, a coder new to music, or just curious, you're in the right place. We'll start simple and explore how to bring your musical ideas to life, one line of code at a time.
                </p>
            </section>

            <section class="tutorial-section" id="ai-generator">
                <h2 data-en="<i class='las la-magic'></i> The AI Pattern Generator" data-fa="<i class='las la-magic'></i> ساخت الگو با هوش مصنوعی"><i class='las la-magic'></i> The AI Pattern Generator</h2>
                <p data-en="This is where the magic begins! The AI Pattern Generator is your creative partner. Instead of writing code from scratch, you can simply describe a musical idea in plain language, and the AI will translate it into Strudel code for you." data-fa="اینجا جایی است که جادو شروع می‌شود! مولد الگوی هوش مصنوعی شریک خلاق شماست. به جای نوشتن کد از صفر، می‌توانید به سادگی یک ایده موسیقایی را به زبان ساده توصیف کنید، و هوش مصنوعی آن را برای شما به کد Strudel ترجمه می‌کند.">
                    This is where the magic begins! The AI Pattern Generator is your creative partner. Instead of writing code from scratch, you can simply describe a musical idea in plain language, and the AI will translate it into Strudel code for you.
                </p>
                
                <h3 data-en="How to Use It" data-fa="چگونه از آن استفاده کنیم">How to Use It</h3>
                <ul>
                    <li data-en="<strong>Find the AI Panel:</strong> Locate the 'ساخت الگو با هوش مصنوعی' panel in the main interface." data-fa="<strong>پنل هوش مصنوعی را پیدا کنید:</strong> پنل «ساخت الگو با هوش مصنوعی» را در رابط کاربری اصلی پیدا کنید."><strong>Find the AI Panel:</strong> Locate the 'ساخت الگو با هوش مصنوعی' panel in the main interface.</li>
                    <li data-en="<strong>Describe Your Idea:</strong> In the text box, type what you want to hear. You can be simple or descriptive. For example: <strong>'a fast techno beat'</strong> or <strong>'a slow, dreamy piano melody in C minor'</strong>." data-fa="<strong>ایده خود را توصیف کنید:</strong> در کادر متنی، آنچه را که می‌خواهید بشنوید تایپ کنید. می‌توانید ساده یا توصیفی باشید. برای مثال: <strong>«یک ریتم تکنو سریع»</strong> یا <strong>«یک ملودی پیانوی آرام و رؤیایی در گام دو مینور»</strong>."><strong>Describe Your Idea:</strong> In the text box, type what you want to hear. You can be simple or descriptive. For example: <strong>'a fast techno beat'</strong> or <strong>'a slow, dreamy piano melody in C minor'</strong>.</li>
                    <li data-en="<strong>Generate:</strong> Hit the 'ساخت الگو' button and watch as the AI crafts the code and places it in the Live Code Editor." data-fa="<strong>تولید کنید:</strong> دکمه «ساخت الگو» را بزنید و ببینید که چگونه هوش مصنوعی کد را ساخته و آن را در ویرایشگر کد زنده قرار می‌دهد."><strong>Generate:</strong> Hit the 'ساخت الگو' button and watch as the AI crafts the code and places it in the Live Code Editor.</li>
                    <li data-en="<strong>Play and Modify:</strong> The generated code will start playing automatically. Now you can edit it, tweak it, and make it your own!" data-fa="<strong>پخش و اصلاح کنید:</strong> کد تولید شده به طور خودکار شروع به پخش می‌کند. حالا می‌توانید آن را ویرایش کنید، تغییر دهید و آن را مال خود کنید!"><strong>Play and Modify:</strong> The generated code will start playing automatically. Now you can edit it, tweak it, and make it your own!</li>
                </ul>
                <div class="tip">
                    <strong data-en="Pro-Tip:" data-fa="نکته حرفه‌ای:">Pro-Tip:</strong>
                    <span data-en="Don't be afraid to experiment! Try different descriptions. Mention instruments (like 'jvbass', 'sawtooth'), feelings ('happy', 'dark'), or genres ('house', 'ambient'). The more specific you are, the closer the result will be to your idea." data-fa="از آزمایش کردن نترسید! توصیفات مختلف را امتحان کنید. به سازها (مانند 'jvbass'، 'sawtooth')، احساسات ('شاد'، 'تاریک') یا ژانرها ('هاوس'، 'امبینت') اشاره کنید. هرچه دقیق‌تر باشید، نتیجه به ایده‌تان نزدیک‌تر خواهد بود.">Don't be afraid to experiment! Try different descriptions. Mention instruments (like 'jvbass', 'sawtooth'), feelings ('happy', 'dark'), or genres ('house', 'ambient'). The more specific you are, the closer the result will be to your idea.</span>
                </div>
            </section>

            <section class="tutorial-section" id="examples">
                <h2 data-en="<i class='las la-shapes'></i> Interactive Strudel Examples" data-fa="<i class='las la-shapes'></i> مثال‌های تعاملی Strudel"><i class='las la-shapes'></i> Interactive Strudel Examples</h2>
                <p data-en="Below are some interactive examples embedded directly from the Strudel REPL. You can see the code and hear the result. Use these as building blocks for your own creations!" data-fa="در زیر چند مثال تعاملی که مستقیماً از محیط Strudel REPL جاسازی شده‌اند، آورده شده است. می‌توانید کد را ببینید و نتیجه را بشنوید. از این‌ها به عنوان بلوک‌های سازنده برای خلاقیت‌های خودتان استفاده کنید!">Below are some interactive examples embedded directly from the Strudel REPL. You can see the code and hear the result. Use these as building blocks for your own creations!</p>

                <div class="example-box">
                    <h3 data-en="Rhythm: The Foundation" data-fa="ریتم: پایه و اساس">Rhythm: The Foundation</h3>
                    <p data-en="Let's start with a simple drum pattern. This code creates a four-on-the-floor kick, a snare on beats 2 and 4, and complex hi-hats." data-fa="بیایید با یک الگوی درام ساده شروع کنیم. این کد یک کیک چهار ضربی، یک اسنر در ضرب‌های ۲ و ۴، و های‌هت‌های پیچیده ایجاد می‌کند.">Let's start with a simple drum pattern. This code creates a four-on-the-floor kick, a snare on beats 2 and 4, and complex hi-hats.</p>
                    <div class="code-block">
                        <button class="copy-btn" data-en="Copy" data-fa="کپی">Copy</button>
                        <code>setCps(1);
s("bd*4, [~ sd]*2, hh(7,8)")</code>
                    </div>
                    <iframe class="strudel-iframe" src="https://strudel.cc/#c2V0Y3BzKDEpCnMoImJkKjQsIFt%2BIHNkXSoyLCBoaCg3LDgpIik%3D"></iframe>
                    <div class="code-explanation" 
                         data-en="`s(...)` is for samples. `bd*4` means 'play the bass drum 4 times per cycle'. `[~ sd]*2` creates an off-beat snare. `hh(7,8)` creates a syncopated 7-step pattern within 8 steps." 
                         data-fa="`s(...)` برای سمپل‌ها است. `bd*4` یعنی «درام بیس را ۴ بار در هر چرخه پخش کن». `[~ sd]*2` یک اسنر خارج از ضرب ایجاد می‌کند. `hh(7,8)` یک الگوی سنکوپ‌دار ۷ ضربی در ۸ استپ می‌سازد.">
                        `s(...)` is for samples. `bd*4` means 'play the bass drum 4 times per cycle'. `[~ sd]*2` creates an off-beat snare. `hh(7,8)` creates a syncopated 7-step pattern within 8 steps.
                    </div>
                </div>

                <div class="example-box">
                    <h3 data-en="Melody & Harmony: The Soul" data-fa="ملودی و هارمونی: روح موسیقی">Melody & Harmony: The Soul</h3>
                    <p data-en="Now let's add a melody. This code plays a simple C minor arpeggio with a sawtooth synth sound, and slows it down." data-fa="حالا یک ملودی اضافه کنیم. این کد یک آرپژ ساده دو مینور را با صدای سینت sawtooth می‌نوازد و سرعت آن را کم می‌کند.">Now let's add a melody. This code plays a simple C minor arpeggio with a sawtooth synth sound, and slows it down.</p>
                    <div class="code-block">
                        <button class="copy-btn" data-en="Copy" data-fa="کپی">Copy</button>
                        <code>setCps(1);
note("c4 eb4 g4").sound("sawtooth").slow(2)</code>
                    </div>
                    <iframe class="strudel-iframe" src="https://strudel.cc/#c2V0Y3BzKDEpCm5vdGUoImM0IGViNCBnNCIpLnNvdW5kKCJzYXd0b290aCIpLnNsb3coMik="></iframe>
                    <div class="code-explanation" 
                         data-en="`note(...)` plays musical notes. `.sound(...)` selects the instrument. `.slow(2)` makes the pattern play at half speed." 
                         data-fa="`note(...)` نت‌های موسیقی را می‌نوازد. `.sound(...)` ساز را انتخاب می‌کند. `.slow(2)` باعث می‌شود الگو با نصف سرعت پخش شود.">
                        `note(...)` plays musical notes. `.sound(...)` selects the instrument. `.slow(2)` makes the pattern play at half speed.
                    </div>
                </div>

                <div class="example-box">
                    <h3 data-en="Sound Design: Shaping Your Sound (ADSR)" data-fa="طراحی صدا: شکل دادن به صدای شما (ADSR)">Sound Design: Shaping Your Sound (ADSR)</h3>
                    <p data-en="You can control the 'shape' of a sound's volume over time using an ADSR envelope: Attack, Decay, Sustain, Release." data-fa="شما می‌توانید «شکل» ولوم یک صدا را در طول زمان با استفاده از یک انولوپ ADSR کنترل کنید: Attack, Decay, Sustain, Release.">You can control the 'shape' of a sound's volume over time using an ADSR envelope: Attack, Decay, Sustain, Release.</p>
                    <div class="code-block">
                        <button class="copy-btn" data-en="Copy" data-fa="کپی">Copy</button>
                        <code>setCps(1);
s("cp*2").attack(0.01).decay(0.1).sustain(0.2).release(0.5)</code>
                    </div>
                    <iframe class="strudel-iframe" src="https://strudel.cc/#c2V0Y3BzKDEpCnMoImNwKjIiKS5hdHRhY2soMC4wMSkuZGVjYXkoMC4xKS5zdXN0YWluKDAuMikucmVsZWFzZSgwLjUp"></iframe>
                    <div class="code-explanation" 
                         data-en="This clap sound has a fast `.attack`, short `.decay` to the `.sustain` level, and then a medium `.release` tail." 
                         data-fa="این صدای clap یک `.attack` سریع، یک `.decay` کوتاه تا سطح `.sustain`، و سپس یک دنباله `.release` متوسط دارد.">
                        This clap sound has a fast `.attack`, short `.decay` to the `.sustain` level, and then a medium `.release` tail.
                    </div>
                </div>

                <div class="example-box">
                    <h3 data-en="Effects: Adding Space and Character" data-fa="افکت‌ها: افزودن فضا و شخصیت">Effects: Adding Space and Character</h3>
                    <p data-en="Effects can completely change the feel of a pattern. Here, we add a low-pass filter, reverb, and delay." data-fa="افکت‌ها می‌توانند حس یک الگو را کاملاً تغییر دهند. در اینجا، ما یک فیلتر پایین‌گذر، ریورب و دیلی اضافه می‌کنیم.">Effects can completely change the feel of a pattern. Here, we add a low-pass filter, reverb, and delay.</p>
                    <div class="code-block">
                        <button class="copy-btn" data-en="Copy" data-fa="کپی">Copy</button>
                        <code>setCps(1);
s("bd*4").lpf(800).room(0.5).delay(0.25)</code>
                    </div>
                    <iframe class="strudel-iframe" src="https://strudel.cc/#c2V0Y3BzKDEpCnMoImJkKjQiKS5scGYoODAwKS5yb29tKDAuNSkuZGVsYXkoMC4yNSk="></iframe>
                    <div class="code-explanation" 
                         data-en="`.lpf(800)` cuts high frequencies above 800Hz. `.room(0.5)` adds reverb (space). `.delay(0.25)` adds echoes." 
                         data-fa="`.lpf(800)` فرکانس‌های بالای ۸۰۰ هرتز را حذف می‌کند. `.room(0.5)` ریورب (فضا) اضافه می‌کند. `.delay(0.25)` اکو اضافه می‌کند.">
                        `.lpf(800)` cuts high frequencies above 800Hz. `.room(0.5)` adds reverb (space). `.delay(0.25)` adds echoes.
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        const langToggle = document.getElementById('lang-toggle');
        const elementsToTranslate = document.querySelectorAll('[data-en], [data-fa]');
        const iframes = document.querySelectorAll('.strudel-iframe');

        function translatePage(lang) {
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'fa' ? 'rtl' : 'ltr';
            document.body.classList.toggle('rtl', lang === 'fa');
            langToggle.textContent = lang === 'fa' ? 'English' : 'Persian';
            langToggle.dataset.lang = lang === 'fa' ? 'en' : 'fa';

            elementsToTranslate.forEach(el => {
                const text = el.dataset[lang];
                if (text) {
                    if (el.tagName === 'BUTTON' || el.classList.contains('copy-btn')) {
                        el.textContent = text;
                    } else {
                        el.innerHTML = text;
                    }
                }
            });

            document.documentElement.style.setProperty('--code-label', lang === 'fa' ? '"کد Strudel"' : '"Strudel Code"');

            // Lazy load iframes
            iframes.forEach(iframe => {
                if (!iframe.classList.contains('active') && iframe.dataset.iframe) {
                    iframe.src = iframe.dataset.iframe;
                    iframe.classList.add('active');
                }
            });
        }

        langToggle.addEventListener('click', () => {
            const newLang = langToggle.dataset.lang || 'en';
            translatePage(newLang);
        });

        function copyCode(btn) {
            const codeBlock = btn.parentElement.querySelector('code');
            const text = codeBlock.textContent;
            navigator.clipboard.writeText(text).then(() => {
                const lang = document.documentElement.lang;
                const originalText = btn.dataset[lang] || 'Copy';
                btn.textContent = lang === 'fa' ? 'کپی شد!' : 'Copied!';
                btn.style.background = '#44ff44';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                btn.textContent = lang === 'fa' ? 'خطا در کپی!' : 'Copy failed!';
                setTimeout(() => {
                    btn.textContent = btn.dataset[lang] || 'Copy';
                }, 2000);
            });
        }

        document.querySelectorAll('.copy-btn').forEach(btn => {
            btn.addEventListener('click', () => copyCode(btn));
        });

        // Smooth scrolling for navigation
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', e => {
                e.preventDefault();
                const target = document.querySelector(anchor.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Intersection Observer for lazy loading iframes
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const iframe = entry.target;
                    if (!iframe.classList.contains('active') && iframe.dataset.iframe) {
                        iframe.src = iframe.dataset.iframe;
                        iframe.classList.add('active');
                    }
                }
            });
        }, { rootMargin: '100px' });

        iframes.forEach(iframe => observer.observe(iframe));

        // Initialize language
        translatePage('en');
    </script>
</body>
</html>